# Sprint: Database ORM
### This was created during my time as a [Code Chrysalis](https://codechrysalis.io) Student

## å‰ç½®ã

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ä»Šã¾ã§ã®ã©ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚ˆã‚Šã‚‚è¤‡é›‘ã§ã™ã€‚ã‚ãªãŸãŒ CC ã‚’å’æ¥­ã—ã€æœ€åˆã®ä»•äº‹ã«ã¤ã„ãŸå¾Œã€ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†ã‚’ã™ã‚‹ã‚ˆã†ã«è¨€ã‚ã‚ŒãŸæ™‚ã®ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æƒ³å®šã—ãŸã‚‚ã®ã§ã™ã€‚ã“ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆãŒã¨ã¦ã‚‚é›£ã—ãæ„Ÿã˜ã‚‹ã®ã¯è‡³ã£ã¦**å½“ç„¶**ã§ã™ã€‚

ä»¥ä¸‹ã¯ã“ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆæ”»ç•¥ã®éµã§ã™

- å¤§è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€åˆ¥ã®ãƒãƒ¼ãƒ ã¾ãŸã¯é–‹ç™ºè€…ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆ¥ã€…ã®ã‚¿ã‚¹ã‚¯ã¨éƒ¨åˆ†ã§ä½œæ¥­ã—ã¦ã‚‚ã‚‰ã†å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ã™ã¹ã¦ã‚’ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹å¿…è¦ã¯ãªãã€ãã‚“ãªæ™‚é–“ã¯æ®‹æ¥­ã—ã¾ãã‚‰ãªã„é™ã‚Šã‚ã‚Šã¾ã›ã‚“ï¼ˆäººç”Ÿã«ã¯éŠã³ã‚‚å¤§åˆ‡ã§ã™ âœŒï¸ï¼‰ã€‚
- ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã«å–ã‚Šçµ„ã‚€ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã©ã“ã§ä½œæ¥­ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚’å„ªå…ˆçš„ã«è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ã€‚
- VSCode ã¯ã‚ãªãŸã® Mate(å‹é”ï¼‰ã§ã™ã€‚`Ctrl/ CMD + P`ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ã°ã‚„ãè¦‹ã¤ã‘ã€ã€Œmigrationã€ãªã©ã®ç”¨èªã‚’æ¤œç´¢ã—ã¦ã€å¿…è¦ãªã‚‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã‚’è¦‹ã¤ã‘ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™
- ã‚ãªãŸã¯ã™ã¹ã¦ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚ã€Œã¾ã‚ã„ã‘ã‚‹ã£ã—ã‚‡ã€‚ã€ã¨ã„ã†å§¿å‹¢ã‚’ä¿ã¤å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã©ã‚“ãªã«å„ªç§€ãªäººã§ã‚‚å…¨ã¦ã¯çŸ¥ã‚Šã¾ã›ã‚“ã€‚**ã¨ã«ã‹ãæ‰‹ã‚’å‹•ã‹ã—ã¦è¡Œãã¾ã—ã‚‡ã†**

## ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³

ã“ã“ã¾ã§ã§ã€ï¼ˆDDL ã‚’ä½¿ç”¨ã—ã¦ï¼‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã—ã€SQL ã‚’ä½¿ç”¨ã—ã¦ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ï¼ˆDML ã‚’ä½¿ç”¨ã—ã¦ï¼‰æ“ä½œã™ã‚‹ã“ã¨ã‚’å‹‰å¼·ã—ã¾ã—ãŸã€‚ãŸã ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¯ã¾ã ç¹‹ã’ã¦ã„ã¾ã›ã‚“ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã©ã®ã‚ˆã†ã«ç¹‹ãŒã£ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã“ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆã§ã¯ã€çµŒè²»ç®¡ç†ã‚¢ãƒ—ãƒªã®å®Ÿè£…ã§ä½¿ã†ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãã®ã‚¢ãƒ—ãƒªã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨çµ±åˆã—ã¾ã™ã€‚å®Ÿéš›ã®é–‹ç™ºã§ã¯ã€é–‹ç™ºè€…ãŒç”Ÿã® SQL ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’æ›¸ãä»£ã‚ã‚Šã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–¢ä¿‚ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆORMï¼‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½¿ç”¨ã®è¤‡é›‘ã•ã‚’æŠ½è±¡åŒ–ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

å¤šãã® ORM ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆRDBMSï¼‰ã®æ¦‚å¿µã¨ãã®è¡¨ç¾ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

| RDBMS ã®æ¦‚å¿µ | ORM ã§ã®è¡¨ç¾ ã€€ã€€     | é–¢é€£èªå½™ã€€ã€€ |
| ------------ | --------------------- | ------------ |
| schema       | collection of classes |              |
| table        | class                 | model        |
| row/record   | class instance        | model        |
| column       | class property        | field        |

ãŸã ã—ã€ORM ã‚’ä½¿ç”¨ã—ã¦ã‚‚ã€ŒSQL ã¯é‡è¦ã§ã¯ãªã„ã€ã¨ã¯è§£é‡ˆã•ã‚Œã¾ã›ã‚“ã€‚ä»¥ä¸‹ãŒç†ç”±ã§ã™ã€‚

1. ã»ã¨ã‚“ã©ã® ORM ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯ã€ãƒ¢ãƒ‡ãƒ«ã§è¡Œã‚ã‚ŒãŸå¤‰æ›´ã‚’æ¤œå‡ºã—ã¦ç§»è¡Œã‚’ç”Ÿæˆã™ã‚‹æ©Ÿèƒ½ãŒä»˜å±ã—ã¦ã„ã¾ã™ã€‚ç”Ÿæˆã•ã‚ŒãŸ DDL ã¯å¸¸ã«ç¢ºèªã‚’ã—ã¦ãã ã•ã„ã€‚ãã†ã—ãªã„ã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚’å¤±ã†ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚
2. çµåˆã€é›†ç´„ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ãƒãƒƒãƒå‡¦ç†ãªã©ã€database-part1 ã§å­¦ã‚“ã æ¦‚å¿µã¯ã€ORM ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åŠ¹ç‡çš„ã«ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ä¸å¯æ¬ ãªçŸ¥è­˜ã§ã™ã€‚
3. ï¼ˆã“ã“ã¯å¾Œã«èª­ã‚“ã§ã‚‚ OK ã§ã™ï¼‰ORM ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€å¤§è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å ´åˆã€åŠ¹ç‡ãŒä½ä¸‹ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ç§»è¡Œä¸­ã« RDBMS ãŒãƒ†ãƒ¼ãƒ–ãƒ«ãƒ¬ãƒ™ãƒ«ã®ãƒ­ãƒƒã‚¯ã‚’å–å¾—ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ãŒè†¨å¤§ãªå ´åˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ãŒé•·æ™‚é–“ãƒ­ãƒƒã‚¯ã•ã‚Œã€ãã®çµæœã€ä¾å­˜ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®å¯ç”¨æ€§ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ç”Ÿæˆã•ã‚ŒãŸ SQL ã‚’æ‰‹å‹•ã§ä»‹å…¥ã—ã¦æœ€é©åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

## ã‚¹ãƒ—ãƒªãƒ³ãƒˆã®ç›®çš„

- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–¢ä¿‚ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆORMï¼‰ã®æ¦‚å¿µã‚’ç†è§£ã™ã‚‹
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç†è§£ã—ã€ORM ã§ã©ã®ã‚ˆã†ã«å‹•ãã‹ã‚’ç†è§£ã™ã‚‹
- TypeScript ã§ CRUD æ“ä½œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹çµŒè²»ç®¡ç† API ã‚’æ§‹ç¯‰ã™ã‚‹å®Ÿè·µ
- ORM ã‚’ä½¿ç”¨ã—ã¦è¤‡é›‘ãªæ“ä½œï¼ˆçµåˆã€é›†è¨ˆã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãªã©ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹å®Ÿè·µ
- (ãƒœãƒ¼ãƒŠã‚¹)JWT ã¨ bcrypt ã‚’ä½¿ç”¨ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã®åŸºæœ¬ã‚’ç†è§£ã™ã‚‹

## ç’°å¢ƒè¨­å®š

### Postgres

postgres ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆã¯ã€[PostgresApp](https://postgresapp.com/)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚³ãƒãƒ³ãƒ‰ `psql`ã‚’å®Ÿè¡Œã—ã¦ã€ãã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ

1.ã€€`psql`ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã€expense_manager ã¨ã„ã†åå‰ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ–°è¦ã«ä½œæˆã—ã¾ã—ã‚‡ã†ï¼š

```
CREATE DATABASE expense_manager
```

2.ã€€ `psql`ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ­£ã—ãä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

```
\c expense_manager
```

### `dotenv`ã‚’ä½¿ç”¨ã—ãŸç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æº–å‚™ãŒã§ããŸã‚‰ã€å°‘ã—å¯„ã‚Šé“ã—ã¦ç’°å¢ƒå¤‰æ•°ã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã—ã‚‡ã†ã€‚ç’°å¢ƒå¤‰æ•°ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å¤–éƒ¨ã«å­˜åœ¨ã™ã‚‹å¤‰æ•°ã§ã‚ã‚Šã€ç‰¹å®šã®ç’°å¢ƒã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹æˆã¨ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æƒ…å ±ã¯ã€ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ä¿å­˜ã•ã‚Œã‚‹å…¸å‹çš„ãªå€¤ã§ã™ã€‚

#### ç’°å¢ƒå¤‰æ•°ã®èª­ã¿å–ã‚Š

ç’°å¢ƒå¤‰æ•°ã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ãƒãƒ¼ãƒ‰ã‚·ã‚§ãƒ«ã§`process.env`ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```
Welcome to Node.js v12.16.1.
Type ".help" for more information.

> process.env
{
  SHELL: '/bin/bash',
  HOME: '/home/melvin',
  USERNAME: 'melvin',
  ...
}
```

ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ã€ãŸãã•ã‚“ã®å€¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚ã“ã‚Œã‚‰ã¯é€šå¸¸ã€ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã‚ˆã£ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚

ç‰¹å®šã®ç’°å¢ƒå¤‰æ•°ã‚’å‚ç…§ã™ã‚‹ã«ã¯`DB_URL`ã§ã‚ã‚Œã°ã€`process.env.DB_URL`ã®ã‚ˆã†ã«ã€`process.env`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã ã‘ã§ã™ã€‚

```
const DB_URL = process.env.DB_URL || "a default value"
```

#### ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ã†

JavaScript ã¨ TypeScript ã§ã¯ã€ç’°å¢ƒå¤‰æ•°ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«é€šå¸¸ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ `dotenv`ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã¨èª­ã¿å–ã‚Šã«ã¯ 3 ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒã‚ã‚Šã¾ã™ã€‚

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«`.env`ã‚’ä½œæˆã—ã€ã™ã¹ã¦ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

ä¾‹

```
DB_NAME=expense_manager
DB_USER=eriko
DB_PASSWORD=eriko
DB_HOST=localhost
DB_PORT=5432
```

2. ã‚¢ãƒ—ãƒªã®èµ·å‹•æ™‚ã« `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

- [ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã« `.env`ã‚’ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹](https://www.npmjs.com/package/dotenv#preload)ï¼šã“ã®ã‚¢ãƒ—ãƒªã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€`.env`ã‚’ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€`.env`ã§å®šç¾©ã•ã‚ŒãŸå¤‰æ•°ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

- [å„ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒˆãƒƒãƒ—ã§ `requireï¼ˆ'dotenv').config()`ã‚’å®Ÿè¡Œ](https://www.npmjs.com/package/dotenv#usage)

  3.ã€€ã‚¢ãƒ—ãƒªå†…ã§ã€ `process.env`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä»‹ã—ã¦å¤‰æ•°ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚

```
console.log(process.env.DB_NAME)    // "expense_manager"
```

ä¸€èˆ¬çš„ãªæ…£ç¿’ã¨ã—ã¦ã€ã™ã¹ã¦ã®æ©Ÿå¯†æƒ…å ±ã¯ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã®ã§ã¯ãªãã€ç’°å¢ƒå¤‰æ•°ã§å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ `dotenv`ã‚’ç”¨ã„ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã‚„èªè¨¼æƒ…å ±ã‚’`package.json`ã¨ `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚ `.env`ã¯`.gitignore`ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã—ã€æ±ºã—ã¦ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

### ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å‰ã«

Node v12ï¼ˆLTSï¼‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ä½¿ç”¨ã—ã¦ã„ã‚‹ node ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ã‚³ãƒãƒ³ãƒ‰:

```
node -v
```

###ã€€ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã“ã®ã‚¢ãƒ—ãƒªã®èµ·å‹•

ã‚³ãƒãƒ³ãƒ‰ã®ä¾‹ï¼š

ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:

```bash
yarn add bcrypt@^4.0
```

```bash
yarn install
```

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¨­å®šãŒæ­£ã—ãã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:

```bash
yarn testConnection
```

ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ:

```bash
    yarn test
```

ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ:

```bash
    yarn dev
```

## ç›®çš„ & ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³

ã“ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆã®çµŒè²»ç®¡ç† API ã«ã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒä»˜ã„ã¦ã„ã¾ã™ã€‚

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã¨èªè¨¼ã®å‡¦ç†
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã® CRUD æ“ä½œã®å‡¦ç†
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³(å–å¼•ï¼‰ã® CRUD æ“ä½œã®å‡¦ç†ï¼ˆè²»ç”¨ã¨åå…¥ã®ä¸¡æ–¹ï¼‰

ã“ã®çµŒè²»ç®¡ç† API ã¯ REST ã®åŸå‰‡ã«æº–æ‹ ã—ã¦æ§‹ç¯‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã«ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸»ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼åˆ©ç”¨ã—ãŸã‚Šã€TypeORM ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨å¯¾è©±ã™ã‚‹ `Manager`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè£…ã—ã¾ã™ã€‚

### åŸºæœ¬ãƒ¬ãƒ™ãƒ«

- [ ] é–‹ç™ºç’°å¢ƒã®æº–å‚™ãŒã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

  - [ ] ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
  - [ ] `src/ormconfig.ts`ã«ç¤ºã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èªè¨¼æƒ…å ±ã§ç’°å¢ƒå¤‰æ•°ã‚’æ›´æ–°ã™ã‚‹ã‹ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å¤‰æ›´ã™ã‚‹
  - [ ] `yarn dev`ã‚’å®Ÿè¡Œã—ã€ã‚µãƒ¼ãƒãƒ¼ãŒè¦å®šã®ãƒãƒ¼ãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`5000`ï¼‰ã§ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™
  - [ ] æº–å‚™å®Œäº†ï¼ãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã«é›†ä¸­ã—ã¦æ¬²ã—ã„ãŸã‚ã€ã¨ã‚Šã‚ãˆãšä»Šã¯ã‚µãƒ¼ãƒãƒ¼ã‚’ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ã¦ã‚‚ ğŸ†—ã€‚

- [ ] ã“ã®ã‚ˆã†ãªã‚¹ãƒ—ãƒªãƒ³ãƒˆã®å ´åˆã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹é€ ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€20ã€œ30 åˆ†ã»ã©ã‹ã‘ã‚‹ã“ã¨ã¯æ™®é€šã§ã™ã€‚ã‚ã‚‹ç¨‹åº¦æ™‚é–“ã¯ã‹ã‘ã¦æ§‹é€ æŠŠæ¡ã‚’ã—ã¾ã—ã‚‡ã†ã€‚å–ã‚Šçµ„ã‚€ä¸Šã§ç‰¹ã«æ¬¡ã®ç‚¹ã«ç‰¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

  - [ ] `src/index.ts`ãŒã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã§ã‚ã‚‹ç‚¹
  - [ ] ã©ã®ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æƒ…å ±ã‚„ã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚¢ãƒ—ãƒªã«æ¸¡ã•ã‚Œã‚‹ç‚¹
  - [ ] [ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯](https://ja.wikipedia.org/wiki/%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF#:~:text=%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%EF%BC%88%E8%8B%B1%3A%20business%20logic,%E7%9A%84%E3%81%AA%E7%94%A8%E8%AA%9E%E3%81%A7%E3%81%82%E3%82%8B%E3%80%82&text=%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AB%E3%81%AF%E3%80%81%E3%82%A8%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%97%E3%83%A9%E3%82%A4%E3%82%BA,%E3%81%AB%E7%94%A8%E3%81%84%E3%82%8B%E7%94%A8%E8%AA%9E%E3%81%A7%E3%81%82%E3%82%8B%E3%80%82)ãŒ `src/services/*`ãŠã‚ˆã³ `src/entities`ã§ã«ã©ã®ã‚ˆã†ã«åˆ†ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã¨ã„ã†ç‚¹

- [ ] `entities`ã‚’è¦‹ã¦ã€æœ€åˆã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹

  - [ ] ã»ã¨ã‚“ã©ã®å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã“ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚‚å«ã‚ã€å…¨ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯**ã‚¯ãƒ©ã‚¹**ã§è¡¨ã•ã‚Œã¾ ã™ã€‚ `src/entities/*.ts`ã®ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚éƒ¨åˆ†çš„ã«ã—ã‹å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ã‚¯ãƒ©ã‚¹ ã‚‚ã‚ã‚Šã€æ®‹ã‚Šã¯ã‚ãªãŸãŒå®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚
  - [ ] `src/entities/UserModel.ts`ã§è¦‹ãŸã‚ˆã†ã«ã€`User`ãƒ¢ãƒ‡ãƒ«ã¯ã™ã§ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€æœ€åˆ ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚ `src/migrations/*-CreateUser.ts`ã«ç§»å‹•ã—ã¦ã€ç”Ÿæˆã•ã‚ŒãŸãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒã©ã®ã‚ˆã†ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
  - [ ] `yarn migrate` ã‚’ä½¿ç”¨ã—ã¦æœ€åˆã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™
  - [ ] `user`ãƒ†ãƒ¼ãƒ–ãƒ«ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`psql`ã‚’ä½¿ç”¨ã—ã¦ç¢ºèªã§ãã¾ ã™ã€‚
  - [ ] ãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹

  - [ ] `yarn test`ã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™
  - [ ] `src/services/users/manager.ts`ã«ç§»å‹•ã—ã€`FIXME`ã‚’å«ã‚€ã‚³ãƒ¡ãƒ³ãƒˆã®ã‚ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¢ã—ã¾ã™ã€‚
    - [ ] `UserManager -> getUser()` ã®å®Ÿè£…ã‚’ã—ã€ãã‚Œã«é–¢ä¿‚ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹ã€‚
    - [ ] `UserManager -> updateUser()` ã®å®Ÿè£…ã‚’ã—ã€ãã‚Œã«é–¢ä¿‚ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹ã€‚
    - [ ] `UserManager -> removeUser()` ã®å®Ÿè£…ã‚’ã—ã€ãã‚Œã«é–¢ä¿‚ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹ã€‚
      > ğŸ’¡ ã‚³ãƒ„ ğŸ’¡ ã€€`UserController`ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€`UserManager`ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã«ç€ç›®ã™ã‚‹ã€‚
    - [ ] `src/tests/index.ts`ã«ç§»å‹•ã—ã€**Auth and user services** ã®ãƒ†ã‚¹ãƒˆã‹ã‚‰`.onlyï¼ˆï¼‰`ã‚’å‰Šé™¤ã™ã‚‹:
          `- describe.only("Auth and user services", () => { ... + describe("Auth and user services", () => { ...`

- [ ] ã‚·ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ç†è§£ã™ã‚‹

  - [ ] `src/seeds/createDummyUser.ts`ã«ç§»å‹•ã—ã€æŒ‡ç¤ºã«å¾“ã£ã¦ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ€ãƒŸãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼`codechrysalis`ã‚’å…¥ã‚Œã‚‹

- [ ] ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®æ„å›³ã‚’ç†è§£ã™ã‚‹

  - [ ] `src/ormconfig.ts`ã«ç§»å‹•ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šéƒ¨ã«ã‚ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€

- [ ] ä»¥ä¸‹ãŒå®Œæˆã—ãŸçŠ¶æ…‹ã®`Account`ãŠã‚ˆã³`Transaction`ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’è¡¨ã™ã‚¯ãƒ©ã‚¹

  - ![å®Ÿä½“é–¢é€£ãƒ¢ãƒ‡ãƒ«å›³](docs/images/erd.png)
  - [ ] `Account`ã¨`Transaction`ã®ãƒ¢ãƒ‡ãƒ«ã¨é–¢ä¿‚æ€§ã‚’å®šç¾©ã™ã‚‹
    > ğŸ’¡ ã‚³ãƒ„ ğŸ’¡ é–¢é€£ã®ã‚ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¼ã«`@OneToMany` ãŒãªãã¦ã‚‚`@ManyToOne`é–¢ä¿‚ã‚’å®šç¾©ã§ãã¾ã™([ã‚½ãƒ¼ã‚¹](https://github.com/typeorm/typeorm/blob/master/docs/many-to-one-one-to-many-relations.md))
  - [ ] `yarn makeMigrations -n <MigrationName>`ã‚’ä½¿ç”¨ã—ã¦æ–°ã—ã„ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
  - [ ] æ–°ã—ãç”Ÿæˆã•ã‚ŒãŸç§»è¡Œã‚’é©ç”¨ã™ã‚‹å‰ã«ã€ä½œæˆã•ã‚ŒãŸç§»è¡Œãƒ•ã‚¡ã‚¤ãƒ«ã® SQL ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãŒå¸Œæœ›ã©ãŠã‚Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãã†ã§ãªã„å ´åˆã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã€ãƒ¢ãƒ‡ãƒ«ã‚’ä¿®æ­£ã—ã¦ã‹ã‚‰ã€å†ç”Ÿæˆã—ã¾ã™ã€‚(**ã‚¹ã‚¿ã‚¤ãƒ«ã®ä¿®æ­£ä»¥å¤–ã«ã€ç”Ÿæˆã•ã‚ŒãŸãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤‰æ›´ã—ãªã„ã§ãã ã•ã„**)
  - [ ] `yarn migrate`ã‚’ä½¿ç”¨ã—ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—,`psql`ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ç¢ºèªã™ã‚‹ã€‚
  - [ ] (Optional)å®Ÿè¡Œã—ãŸç§»è¡Œã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€TypeORM ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ã€ `package.json`ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ`rollback`ã‚’å®šç¾©ã—ã¦ãã ã•ã„

  - [ ] ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã‚µãƒ¼ãƒ“ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¨ã¦æ›¸ã.

  - [ ] æ•°åˆ†ã‹ã‘ã¦ã€ `src/tests/index.ts`ã§ãã‚Œãã‚Œã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ç›®ã‚’é€šã—ã¦ãã ã•ã„ã€‚
    > ğŸ’¡ ã‚³ãƒ„ ğŸ’¡ ã„ã¤ã§ã‚‚ `.skipï¼ˆï¼‰`ã¾ãŸã¯ `.onlyï¼ˆï¼‰`ã‚’ä½¿ç”¨ã—ã¦ã€å®Ÿè¡Œã™ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æŒ‡å®šã§ãã¾ã™
  - [ ] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹ï¼ˆ`src/services/ account/*.ts`)ã§`FIXME`ã®ã‚ã‚‹å ´æ‰€ã‚’ä¿®æ­£ã—ã€ãƒ† ã‚¹ãƒˆã«åˆæ ¼ã™ã‚‹
    - [ ] ã‚³ãƒ¡ãƒ³ãƒˆã§æŒ‡ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ `AccountManager`ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã®è¡Œã®ã‚³ãƒ¡ãƒ³ ãƒˆã‚’å¤–ã—ã¾ã™
    - [ ] `AccountManager -> getAccount()`ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
      > ğŸ’¡ ã‚³ãƒ„ ğŸ’¡`account`ãƒ†ãƒ¼ãƒ–ãƒ«ã¨`transaction`ãƒ†ãƒ¼ãƒ–ãƒ«ã®çµåˆãŒå¿…è¦ã§ã™ã€‚
    - [ ] `AccountManager -> createAccount()` ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `AccountManager -> updateAccount()` ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `AccountManager -> deleteAccount()` ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
  - [ ] ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆ`src/services/transaction/*.ts`ï¼‰ã§`FIXME`ã®ã‚ã‚‹å ´æ‰€ã‚’ä¿®æ­£ã—ã€ãƒ†ã‚¹ãƒˆã«ãƒ‘ã‚¹ã™ã‚‹
    - [ ] ã‚³ãƒ¡ãƒ³ãƒˆã§æŒ‡ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ `TransactionManager`ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã®è¡Œã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã—ã¾ã™
    - [ ] `TransactionManager -> getTransaction()`ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `TransactionManager -> createTransactiom()`ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `TransactionManager -> deleteTransaction()`ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `TransactionManager -> listTransactionsByIds()`ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `TransactionManager -> listTransactionsInAccount()`ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `TransactionManager -> filterTransactionsByAmountInAccount()`ã‚’å®Ÿè£…ã—ã¦ã€é–¢é€£ã—ãŸãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹

- [ ] **å‚è€ƒè³‡æ–™**
      ã“ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ORM ã«é–¢ã™ã‚‹ã‚‚ã®ã§ã™ãŒã€ãã‚Œã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã•ã‚‰ã«è¿‘ã¥ã‘ã‚‹ãŸã‚ã«ã€æ„å›³çš„ã«èªè¨¼ã®åŸºæœ¬ã‚’ã„ãã¤ã‹å«ã‚ã¾ã—ãŸã€‚ Auth ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¦‹ã¦ç†è§£ã—ã¦ã¿ã¾ã—ã‚‡ã†
  - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆæ–¹æ³•
  - [ ] [JWT ãƒˆãƒ¼ã‚¯ãƒ³](https://jwt.io/introduction/)ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æƒ…å ±ã‚’äº¤æ›ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µã‚¤ãƒ³ã‚¤ãƒ³ã™ã‚‹æ–¹æ³•
  - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå–å¾—ã—ãŸ JWT ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦è‡ªåˆ†è‡ªèº«ã‚’èªè¨¼ã™ã‚‹æ–¹æ³•
  - [ ] `bcrypt`ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹æ–¹æ³•
  - [ ] ã™ã¹ã¦ã® `BaseControllerã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹-> createRouterï¼ˆï¼‰`ãƒ¡ã‚½ãƒƒãƒ‰ã«ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ `src/authentication.ts-> guardedï¼ˆï¼‰`é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ–¹æ³•

### ä¸Šç´šãƒ¬ãƒ™ãƒ«

- [ ] TypeORM ã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã®ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹
  - [ ] `src/database.ts`ã«ç§»å‹•ã—ã€ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€
- [ ] é‡è¤‡ã™ã‚‹ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã‚’ã‚­ãƒ£ãƒƒãƒã—ã€é©åˆ‡ãª HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é©åˆ‡ã«æç¤ºã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹
- [ ] API ã‚’å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿‘ã¥ã‘ã¾ã™ã€‚

  - [ ] ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‹ã‚‰ skip()ã‚’å–ã‚Šé™¤ãã€ãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã™ã‚‹
    - [ ] `'Auth and user services' -> 'should restrict access by unauthorised user'`
    - [ ] `'Account service' -> 'should restrict access by unauthenticated user'`
    - [ ] `'Account service' -> 'should restrict access by unauthorised user'`
    - [ ] `'Transaction service' -> 'should restrict access by unauthenticated user'`
    - [ ] `'Transaction service' -> 'should restrict access by unauthorised user'`
  - [ ] å‰Šé™¤è¦æ±‚ã‚’å‡¦ç†ã™ã‚‹å ´åˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤ã•ã‚Œã¾ã™ãŒã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç‰¹åˆ¥ãªåˆ—ã‚’ä½¿ç”¨ã¦ ã€Œå‰Šé™¤æ¸ˆã¿ã€ã¨ã—ã¦ãƒãƒ¼ã‚¯ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚ã“ã®æ‰‹æ³•ã¯ã€Œè«–ç†å‰Šé™¤ã€ã¨å‘¼ã°ã‚Œã¾ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆè’é‡ã« é£›ã³è¾¼ã¿ã€ã“ã®ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦èª¿æŸ»ã—ã€ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
  - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã™ã¹ã¦ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ¬ã‚³ãƒ¼ãƒ‰(å–å¼•è¨˜éŒ²ï¼‰ã‚’ CSV ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æ–°æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹

## References

- [TypeORMï¼šã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç†è§£ã™ã‚‹](https://typeorm.io/#/entities)
- [TypeORM: Advanced Options](https://github.com/typeorm/typeorm/blob/master/docs/find-options.md#advanced-options)
- [TypeORM: Many-To-One é–¢ä¿‚ã‚’å®šç¾©ã™ã‚‹](https://github.com/typeorm/typeorm/blob/master/docs/many-to-one-one-to-many-relations.md)
- [node-jsonwebtoken](https://github.com/auth0/node-jsonwebtoken#readme)
- [TypeScript ã«ãŠã‘ã‚‹`this`](https://github.com/microsoft/TypeScript/wiki/%27this%27-in-TypeScript#use-instance-functions)
- [`@JoinColumn` options](https://orkhan.gitbook.io/typeorm/docs/relations#joincolumn-options)